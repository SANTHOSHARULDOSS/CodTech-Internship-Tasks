import socket
import sys
import time

def scan_ports():
    """Module 1: Port Scanner"""
    print("\n--- PORT SCANNER MODULE ---")
    target = input("Enter target IP (try '127.0.0.1' for localhost): ")
    
    # Scan just the first 100 ports for speed
    print(f"Scanning {target} for open ports (1-100)...")
    
    try:
        for port in range(1, 101):
            # Create a socket object
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            s.settimeout(0.1) # Wait only 0.1s per port
            
            # Try to connect
            result = s.connect_ex((target, port))
            if result == 0:
                print(f"[+] Port {port} is OPEN")
            s.close()
            
    except KeyboardInterrupt:
        print("\nExiting scan.")
    except Exception as e:
        print(f"Error: {e}")
    print("Scan complete.")

def check_password_strength():
    """Module 2: Password Strength Checker"""
    print("\n--- PASSWORD CHECKER MODULE ---")
    password = input("Enter a password to test: ")
    
    score = 0
    feedback = []
    
    if len(password) >= 8:
        score += 1
    else:
        feedback.append("Too short (needs 8+ chars)")
        
    if any(c.isdigit() for c in password):
        score += 1
    else:
        feedback.append("Missing numbers")
        
    if any(c.isupper() for c in password):
        score += 1
    else:
        feedback.append("Missing uppercase letters")
        
    if any(c in "!@#$%^&*" for c in password):
        score += 1
    else:
        feedback.append("Missing special characters (!@#$)")

    print(f"\nPassword Score: {score}/4")
    if score == 4:
        print("Verdict: STRONG PASSWORD ✅")
    else:
        print("Verdict: WEAK PASSWORD ❌")
        print("Suggestions:", ", ".join(feedback))

# --- MAIN MENU ---
while True:
    print("\n=== PENTEST TOOLKIT ===")
    print("1. Port Scanner")
    print("2. Password Strength Checker")
    print("3. Exit")
    
    choice = input("Select an option (1-3): ")
    
    if choice == '1':
        scan_ports()
    elif choice == '2':
        check_password_strength()
    elif choice == '3':
        print("Exiting toolkit. Goodbye!")
        break
    else:
        print("Invalid choice, try again.")
